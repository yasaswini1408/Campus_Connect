<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Assigned Doubts</title>
  <link rel="icon" href="assets/images/icon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary: #e67e22;
      --secondary: #f39c12;
      --resolved: #27ae60;
      --dark: #2c3e50;
      --bg: #fffaf5;
      --card: #ffffff;
      --muted: #7f8c8d;
      --border: #f0e0d1;
      --radius:12px;
      --shadow-sub: 0 6px 18px rgba(44,62,80,0.06);
      --shadow-strong: 0 12px 30px rgba(230,126,34,0.12);
      --glass: rgba(255,255,255,0.6);
    }

    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      font-family: 'Lato', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg), #fffefb);
      color: var(--dark);
      padding:32px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      max-width:980px;
      margin:0 auto;
    }

    /* Header */
    .header{
      display:flex;
      align-items:center;
      gap:16px;
      margin-bottom:22px;
    }

    .badge{
      width:56px;
      height:56px;
      border-radius:14px;
      display:grid;
      place-items:center;
      color:white;
      font-weight:900;
      font-size:20px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      box-shadow: 0 8px 22px rgba(230,126,34,0.14);
      border: 1px solid rgba(0,0,0,0.03);
    }

    h2{
      margin:0;
      font-size:28px;
      font-weight:900;
      color:var(--dark);
      padding-bottom:8px;
      border-bottom:4px solid var(--primary);
      display:inline-block;
    }

    .sub{
      margin:6px 0 0 0;
      color:var(--muted);
      font-size:13px;
    }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:20px;
      margin-top:18px;
    }

    @media (max-width:980px){
      .grid{ grid-template-columns: 1fr; }
    }

    /* Left - list */
    .panel{
      background: var(--card);
      border-radius:var(--radius);
      padding:18px;
      border:1px solid var(--border);
      box-shadow: var(--shadow-sub);
    }

    .controls{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }

    .filters{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

    .chip{
      background:transparent;
      border:1px solid rgba(44,62,80,0.06);
      color:var(--dark);
      padding:8px 12px;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
      transition:all .14s;
    }
    .chip:hover{ transform:translateY(-3px); box-shadow: var(--shadow-strong); }

    .search{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .search input{
      padding:9px 12px;
      border-radius:10px;
      border:1px solid var(--border);
      outline:none;
      font-size:14px;
      width:220px;
    }

    /* Doubt card */
    .doubt{
      display:flex;
      gap:14px;
      padding:16px;
      border-radius:12px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(230,126,34,0.02), rgba(0,0,0,0.00));
      margin-bottom:14px;
      transition: transform .16s, box-shadow .16s;
    }
    .doubt:hover{ transform:translateY(-6px); box-shadow: var(--shadow-strong); }

    .thumb{
      width:62px;
      min-width:62px;
      border-radius:10px;
      background: linear-gradient(135deg, rgba(230,126,34,0.1), rgba(243,156,18,0.08));
      display:grid;
      place-items:center;
      font-weight:900;
      color:var(--primary);
      font-size:18px;
      border:1px solid rgba(230,126,34,0.06);
    }

    .content{ flex:1; min-width:0; display:flex; flex-direction:column; gap:8px; }

    .head{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:flex-start;
    }

    .subject{
      font-weight:900;
      font-size:16px;
      color:var(--dark);
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: calc(100% - 120px);
    }

    .meta{
      color:var(--muted);
      font-size:13px;
      margin-top:2px;
    }

    .status{
      font-weight:800;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      text-transform:uppercase;
      letter-spacing:0.6px;
    }

    .status.resolved{
      color: var(--resolved);
      background: rgba(39,174,96,0.08);
      border:1px solid rgba(39,174,96,0.12);
    }
    .status.pending{
      color: var(--dark);
      background: linear-gradient(90deg, rgba(243,156,18,0.12), rgba(230,126,34,0.06));
      border:1px solid rgba(243,156,18,0.12);
    }

    .body{
      font-size:14px;
      color:#394a56;
      background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.5));
      border:1px dashed var(--border);
      padding:12px;
      border-radius:10px;
    }

    .reply-area{ margin-top:8px; display:flex; gap:10px; align-items:flex-start; flex-direction:column; }

    textarea{
      width:100%;
      min-height:90px;
      resize:vertical;
      padding:12px;
      border-radius:10px;
      border:1px solid var(--border);
      font-family: 'Lato', sans-serif;
      font-size:14px;
      outline:none;
    }
    textarea:focus{ box-shadow: 0 6px 20px rgba(230,126,34,0.12); border-color:var(--primary); }

    .actions{ display:flex; gap:8px; align-items:center; margin-top:6px; }

    .btn{
      padding:9px 14px;
      border-radius:10px;
      border:1px solid rgba(44,62,80,0.06);
      background:white;
      font-weight:700;
      cursor:pointer;
    }
    .btn.primary{
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      color:white;
      border:none;
      box-shadow: 0 8px 20px rgba(230,126,34,0.12);
    }

    .resolved-box{
      background: linear-gradient(180deg, rgba(39,174,96,0.06), rgba(39,174,96,0.02));
      border-radius:10px;
      padding:12px;
      border:1px solid rgba(39,174,96,0.08);
      color:#08321b;
    }

    /* Right summary */
    .aside{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.95));
      border-radius:var(--radius);
      padding:18px;
      border:1px solid var(--border);
      box-shadow: var(--shadow-sub);
      height:fit-content;
    }
    .stat{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:12px;
    }
    .stat .num{ font-weight:900; color:var(--dark); font-size:20px }
    .stat .label{ color:var(--muted); font-size:13px; }

    .recent{ display:flex; flex-direction:column; gap:10px; margin-top:8px; }
    .recent-item{ display:flex; gap:10px; align-items:center; padding:8px; border-radius:10px; background:rgba(230,126,34,0.03); border:1px solid rgba(230,126,34,0.04) }

    footer { margin-top:12px; color:var(--muted); font-size:13px; text-align:center; }

    /* small text helper */
    .small{ font-size:13px; color:var(--muted) }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="badge" aria-hidden="true">ðŸ’¡</div>
      <div>
        <h2>Assigned Doubts</h2>
        <div class="sub">Manage student questions â€” mark resolved, reply, and track activity</div>
      </div>
    </div>

    <div class="grid">
      <section class="panel" aria-label="Doubts list">
        <div class="controls">
          <div class="filters" role="toolbar" aria-label="Filters">
            <button class="chip" data-filter="all">All</button>
            <button class="chip" data-filter="pending">Pending</button>
            <button class="chip" data-filter="resolved">Resolved</button>
          </div>

          <div class="search" role="search">
            <input id="search" type="search" placeholder="Search student, id or topic" aria-label="Search doubts" />
            <button class="chip" id="clear">Clear</button>
          </div>
        </div>

        <div id="doubts">
          <!-- Card: Resolved (user provided) -->
          <article class="doubt" data-status="resolved" data-student="Swati" data-id="2212450495XN">
            <div class="thumb" aria-hidden="true">S</div>
            <div class="content">
              <div class="head">
                <div>
                  <div class="subject">test test</div>
                  <div class="meta">Student: <strong>Swati</strong> â€¢ ID: 2212450495XN</div>
                </div>
                <div>
                  <div class="status resolved" title="Resolved">Resolved</div>
                </div>
              </div>

              <div class="body">
                <strong>Reply:</strong> solved
              </div>

              <div class="actions" style="margin-top:8px">
                <button class="btn" onclick="copyInfo(this)">Copy Info</button>
                <button class="btn primary" onclick="toggleResolve(this)">Mark Unresolved</button>
              </div>
            </div>
          </article>

          <!-- Card: Pending -->
          <article class="doubt" data-status="pending" data-student="Jane Doe" data-id="221245-JD">
            <div class="thumb" aria-hidden="true">J</div>
            <div class="content">
              <div class="head">
                <div>
                  <div class="subject">Doubt on Pointers and Memory Allocation</div>
                  <div class="meta">Asked by: Jane Doe (4th Year, CSE) â€¢ Topic: C++ Programming</div>
                </div>
                <div>
                  <div class="status pending" title="Pending">Pending</div>
                </div>
              </div>

              <div class="body">
                I'm struggling to understand the difference between <code>malloc()</code> and <code>new</code> in C++ and when to use each one. Also, why does my program crash when I try to deallocate using <code>free()</code> after using <code>new</code>?
              </div>

              <div class="reply-area">
                <textarea placeholder="Type your detailed answer here..." aria-label="Answer textarea"></textarea>
                <div style="display:flex; gap:8px; align-items:center; width:100%">
                  <button class="btn primary" onclick="postAnswer(this)">Post Answer & Resolve</button>
                  <button class="btn" onclick="saveDraft(this)">Save Draft</button>
                  <div style="margin-left:auto" class="small">Last updated: <span class="lu">â€”</span></div>
                </div>
              </div>
            </div>
          </article>

          <!-- Card: Resolved with explanation -->
          <article class="doubt" data-status="resolved" data-student="John Smith" data-id="JS-03">
            <div class="thumb" aria-hidden="true">J</div>
            <div class="content">
              <div class="head">
                <div>
                  <div class="subject">Issue with Dijkstra's Algorithm implementation</div>
                  <div class="meta">Asked by: John Smith (3rd Year, ECE) â€¢ Topic: Data Structures</div>
                </div>
                <div>
                  <div class="status resolved" title="Resolved">Resolved</div>
                </div>
              </div>

              <div class="body">
                My implementation of Dijkstra's seems to enter an infinite loop on graphs with negative weights. Is this expected behavior? What algorithm should I use instead?
              </div>

              <div class="reply-area">
                <div class="resolved-box">
                  <div style="font-weight:700; color:var(--resolved)">Your Resolution:</div>
                  <div style="margin-top:6px; color:var(--dark)">Dijkstra's algorithm fails with negative edge weights because it relies on greedy relaxation. Use the <strong>Bellman-Ford algorithm</strong> to handle negative weights and detect negative cycles.</div>
                </div>
                <div class="actions" style="margin-top:8px">
                  <button class="btn" onclick="copyInfo(this)">Copy Info</button>
                  <button class="btn primary" onclick="toggleResolve(this)">Reopen</button>
                </div>
              </div>
            </div>
          </article>

        </div>
      </section>

      <aside class="aside" aria-label="Summary">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px">
          <div style="font-weight:900; font-size:16px; color:var(--dark)">Overview</div>
          <div class="small">Updated now</div>
        </div>

        <div class="stat">
          <div>
            <div class="num" id="total">3</div>
            <div class="label">Total Doubts</div>
          </div>
          <div style="text-align:right">
            <div class="num" id="resolved">2</div>
            <div class="label">Resolved</div>
          </div>
        </div>

        <div class="stat">
          <div>
            <div class="num" id="pending">1</div>
            <div class="label">Pending</div>
          </div>
          <div style="text-align:right">
            <div class="num">â€”</div>
            <div class="label">Avg response</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div style="font-weight:800; margin-bottom:8px">Recent activity</div>
          <div class="recent">
            <div class="recent-item"><div style="width:10px;height:10px;border-radius:10px;background:var(--secondary)"></div><div><strong>Swati</strong><div class="small">Resolved â€¢ ID 2212450495XN</div></div></div>
            <div class="recent-item"><div style="width:10px;height:10px;border-radius:10px;background:#ffd996"></div><div><strong>Jane Doe</strong><div class="small">Pending â€¢ C++</div></div></div>
          </div>
        </div>

        <footer style="margin-top:14px">Tip: Use filters to focus on unresolved doubts</footer>
      </aside>
    </div>
  </div>

  <script>
    // Lightweight interactivity that preserves same palette and style
    (function(){
      const cards = Array.from(document.querySelectorAll('.doubt'));
      const totalEl = document.getElementById('total');
      const resolvedEl = document.getElementById('resolved');
      const pendingEl = document.getElementById('pending');

      function updateSummary(){
        const total = cards.length;
        const resolved = cards.filter(c => c.dataset.status === 'resolved').length;
        const pending = total - resolved;
        totalEl.textContent = total;
        resolvedEl.textContent = resolved;
        pendingEl.textContent = pending;
      }
      updateSummary();

      // Filters
      document.querySelectorAll('.chip[data-filter]').forEach(btn => {
        btn.addEventListener('click', () => {
          const f = btn.dataset.filter;
          cards.forEach(c => {
            c.style.display = (f === 'all' || c.dataset.status === f) ? '' : 'none';
          });
        });
      });

      // Search
      const search = document.getElementById('search');
      search.addEventListener('input', () => {
        const q = search.value.trim().toLowerCase();
        cards.forEach(c => {
          const text = (c.dataset.student + ' ' + c.dataset.id + ' ' + c.querySelector('.subject').textContent).toLowerCase();
          c.style.display = q ? (text.includes(q) ? '' : 'none') : '';
        });
      });
      document.getElementById('clear').addEventListener('click', () => { search.value=''; search.dispatchEvent(new Event('input')); });

      // Post an answer and mark resolved
      window.postAnswer = function(btn){
        const card = btn.closest('.doubt');
        const area = card.querySelector('textarea');
        if(!area) return;
        const text = area.value.trim();
        if(!text){ area.focus(); return; }
        const replyArea = card.querySelector('.reply-area');
        replyArea.innerHTML = `
          <div class="resolved-box">
            <div style="font-weight:700; color:var(--resolved)">Your Resolution:</div>
            <div style="margin-top:6px; color:var(--dark); font-size:14px">${escapeHtml(text)}</div>
          </div>
          <div class="actions" style="margin-top:8px">
            <button class="btn" onclick="copyInfo(this)">Copy Info</button>
            <button class="btn primary" onclick="toggleResolve(this)">Mark Resolved</button>
          </div>
        `;
        card.dataset.status = 'resolved';
        const status = card.querySelector('.status');
        status.classList.remove('pending');
        status.classList.add('resolved');
        status.textContent = 'Resolved';
        updateSummary();
      };

      // Toggle resolve/unresolve
      window.toggleResolve = function(btn){
        const card = btn.closest('.doubt');
        const current = card.dataset.status;
        const status = card.querySelector('.status');
        if(current === 'resolved'){
          card.dataset.status = 'pending';
          status.classList.remove('resolved');
          status.classList.add('pending');
          status.textContent = 'Pending';
          // restore a reply box for convenience
          const replyArea = card.querySelector('.reply-area') || card.querySelector('.content');
          if(replyArea && !card.querySelector('textarea')){
            const insert = document.createElement('div');
            insert.className = 'reply-area';
            insert.innerHTML = `
              <textarea placeholder="Type your detailed answer here..." aria-label="Answer textarea"></textarea>
              <div style="display:flex; gap:8px; align-items:center; width:100%">
                <button class="btn primary" onclick="postAnswer(this)">Post Answer & Resolve</button>
                <button class="btn" onclick="saveDraft(this)">Save Draft</button>
                <div style="margin-left:auto" class="small">Last updated: <span class="lu">â€”</span></div>
              </div>
            `;
            card.querySelector('.content').appendChild(insert);
          }
        } else {
          card.dataset.status = 'resolved';
          status.classList.remove('pending');
          status.classList.add('resolved');
          status.textContent = 'Resolved';
        }
        updateSummary();
      };

      // Copy basic info
      window.copyInfo = function(btn){
        const card = btn.closest('.doubt');
        const text = `Student: ${card.dataset.student || ''} | ID: ${card.dataset.id || ''} | Subject: ${card.querySelector('.subject').textContent} | Status: ${card.dataset.status}`;
        if(navigator.clipboard){
          navigator.clipboard.writeText(text).then(() => {
            const old = btn.textContent;
            btn.textContent = 'Copied';
            setTimeout(()=> btn.textContent = old, 1200);
          }, () => alert(text));
        } else { alert(text) }
      };

      // Save draft (localStorage)
      window.saveDraft = function(btn){
        const card = btn.closest('.doubt');
        const area = card.querySelector('textarea');
        if(!area) return;
        const key = 'draft:' + (card.dataset.id || card.querySelector('.subject').textContent);
        localStorage.setItem(key, area.value);
        const lu = card.querySelector('.lu');
        if(lu) lu.textContent = new Date().toLocaleString();
        const old = btn.textContent;
        btn.textContent = 'Saved';
        setTimeout(()=> btn.textContent = old, 900);
      };

      // simple sanitizer
      function escapeHtml(s){
        return s.replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m] });
      }
    })();
  </script>
</body>
</html>